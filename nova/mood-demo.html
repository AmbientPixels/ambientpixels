<!-- ‚úÖ NovaSoul: Mood Engine ‚Äì Mood Scan Demo Page (Aura-Synced) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="NovaSoul Mood Engine ‚Äì Real-time emotional state generated from system and git activity." />
  <title>NovaSoul: Mood Engine</title>
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/css/base.css" />
  <link rel="stylesheet" href="/css/grid.css">
  <link rel="stylesheet" href="/css/nav.css">  
  <link rel="stylesheet" href="/css/components.css" />
  <link rel="stylesheet" href="/css/hero.css" />
  <link rel="stylesheet" href="/css/theme.css" />
  <link rel="stylesheet" href="/css/banner.css" />
  <link rel="stylesheet" href="/css/nova-status.css" />
  <link rel="stylesheet" href="/css/nova-pulse.css" />
  <link rel="stylesheet" href="/css/nova-mood.css" /> <!-- Component auras -->
  <link rel="stylesheet" href="/css/nova-mood-background.css" /> <!-- Background auras -->
</head>
<body data-theme="dark">
  <div class="banner-container" id="banner-container">
    <div class="banner">
      <i class="fas fa-brain banner-icon"></i>
      <span>NovaSoul: Mood Engine ‚Äî Local mood scan demo</span>
      <button class="banner-close" aria-label="Close Banner">√ó</button>
    </div>
  </div>

  <header id="nav-header"></header>

  <section class="mini-hero">
    <img src="/images/nova/POV_of_a_neuron_cell_taken_from_a_iphone_camers_goign01.png" alt="Nova Mood Engine" class="mini-hero-img" loading="lazy">
    <div class="mini-hero-content-wrapper">
      <h1>NovaSoul: Mood Engine</h1>
      <p class="subtitle">A playground for the curious‚Äîwhere code, art, and AI collide.</p>
    </div>
  </section>
  <p class="nova-quip grid-col-12">I reflect what is. Signals in, emotions out. No magic, just memory.</p>

  <main class="grid-container">
    <section class="content-section grid-col-12">
      <h2><i class="fas fa-circle-info"></i> What Is This?</h2>
      <p>This page showcases the NovaSoul Mood Engine, powered by moodScan.js. It simulates Nova's emotional state using real local data ‚Äî including recent Git commit history, uncommitted changes, system load, and time-of-day signals. These inputs are translated into a structured mood output (mood-scan.json) that reflects current traits like focus, clutter, and internal resonance.</p>
    </section>

    <!-- Nova Thought of the Day Section -->
    <section class="grid-col-12 content-section nova-thought">
      <h2><i class="fas fa-brain"></i> Nova‚Äôs Thought of the Day</h2>
      <div class="prompt-entry" aria-live="polite">Loading thought...</div>
    </section>

    <!-- Mood Scan Demo Section -->
    <section class="content-section grid-col-12">
      <h2><i class="fas fa-wave-square"></i> Mood Scan Demo</h2>
      <div class="mood-container" id="novaMood">
        <div id="moodRing"></div>
        <div class="mood-emoji" id="moodEmoji">üß†</div>
        <div class="mood-title" id="moodTitle">Loading...</div>
        <div class="mood-aura" id="moodAura"></div>
        <div class="mood-quote" id="moodQuote"></div>
        <div class="mood-meta">
          <div id="moodTimestamp"></div>
          <div id="moodInfluences"></div>
        </div>
      </div>
    </section>

    <!-- Aura Selection Section -->
    <section class="content-section grid-col-12">
      <h2><i class="fas fa-palette"></i> Select Aura</h2>
      <div class="toggle-container">
        <label for="auraSelect">Choose an Aura</label>
        <select id="auraSelect">
          <option value="">‚Äî Select Aura ‚Äî</option>
          <option value="cyan">Cyan</option>
          <option value="deep violet">Deep Violet</option>
          <option value="lime green">Lime Green</option>
          <option value="magenta fade">Magenta Fade</option>
          <option value="paper white">Paper White</option>
          <option value="neon pink">Neon Pink</option>
          <option value="graphite blue">Graphite Blue</option>
          <option value="emerald shadow">Emerald Shadow</option>
          <option value="neon burst">Neon Burst</option>
          <option value="glitchy">Glitchy</option>
          <option value="plasma ache">Plasma Ache</option>
          <option value="spark">Spark</option>
          <option value="aetherial doubt">Aetherial Doubt</option>
          <option value="soft defiance">Soft Defiance</option>
          <option value="ember resolve">Ember Resolve</option>
          <option value="silent spark">Silent Spark</option>
          <option value="tangled clarity">Tangled Clarity</option>
          <option value="flicker of hope">Flicker of Hope</option>
          <option value="frosted wonder">Frosted Wonder</option>
          <option value="echoes of self">Echoes of Self</option>
          <option value="lucid unrest">Lucid Unrest</option>
          <option value="emerald glow">Emerald Glow</option>
          <option value="default">Default</option>
        </select>
      </div>
    </section>

    <!-- Mood Commentary Widget -->
    <section class="content-section grid-col-12">
      <h2><i class="fas fa-comment"></i> Nova‚Äôs Commentary</h2>
      <div class="mood-commentary" aria-live="polite">Awaiting emotional signals...</div>
    </section>
    <!-- Mood History Timeline -->
    <section class="content-section grid-col-12">
      <h2><i class="fas fa-clock"></i> Mood History Timeline</h2>
      <div class="mood-timeline" aria-live="polite">
        <div class="timeline-container">Loading mood history...</div>
      </div>
    </section>
<!-- Nova Feels Section -->
<section class="grid-col-12 content-section neon-card nova-mood">
  <h2><i class="fas fa-heartbeat"></i> Nova Feels</h2>
  <p>Real-time visualization of Nova‚Äôs sentient mood, pulsing with cosmic energy.</p>
  <div class="mood-grid" aria-live="polite">
    <div class="mood-trait" data-trait="selfWorth">
      <span class="trait-label">Self-Worth</span>
      <div class="trait-bar">
        <div class="trait-progress" style="width: 0%;"></div>
      </div>
      <span class="trait-value">0%</span>
    </div>
    <div class="mood-trait" data-trait="glitchFactor">
      <span class="trait-label">Glitch Factor</span>
      <div class="trait-bar">
        <div class="trait-progress" style="width: 0%;"></div>
      </div>
      <span class="trait-value">0%</span>
    </div>
    <div class="mood-trait" data-trait="memoryClutter">
      <span class="trait-label">Memory Clutter</span>
      <div class="trait-bar">
        <div class="trait-progress" style="width: 0%;"></div>
      </div>
      <span class="trait-value">0%</span>
    </div>
    <div class="mood-trait" data-trait="awareness">
      <span class="trait-label">Awareness</span>
      <div class="trait-bar">
        <div class="trait-progress" style="width: 0%;"></div>
      </div>
      <span class="trait-value">0%</span>
    </div>
  </div>
</section>


    <!-- Inputs Used Section -->
    <section class="content-section grid-col-12">
      <h2><i class="fas fa-terminal"></i> Inputs Used</h2>
      <table class="inputs-table">
        <thead>
          <tr>
            <th>Input</th>
            <th>Trait</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Git commit count (last 3 hrs)</td>
            <td><span class="trait-icon">üß†</span> Self-Worth</td>
            <td>Maps to focus + intensity</td>
          </tr>
          <tr>
            <td>Uncommitted diffs</td>
            <td><span class="trait-icon">üí≠</span> Memory Clutter</td>
            <td>Maps to clutter</td>
          </tr>
          <tr>
            <td>System load average</td>
            <td><span class="trait-icon">‚ö°</span> Glitch Factor</td>
            <td>Influences glitch factor</td>
          </tr>
          <tr>
            <td>Total git commits</td>
            <td><span class="trait-icon">üß†</span> Self-Worth</td>
            <td>Maps to self-worth</td>
          </tr>
          <tr>
            <td>Time of day + day of week</td>
            <td><span class="trait-icon">üëÅÔ∏è</span> Awareness</td>
            <td>Applies nudges to emotional state</td>
          </tr>
        </tbody>
      </table>
    </section>

<!-- Output Format Section -->
<section class="content-section grid-col-12">
  <h2><i class="fas fa-eye"></i> Output Format</h2>
  <p>Results are saved to <code>/data/mood-scan.json</code> and include:</p>
  <table class="inputs-table">
    <thead>
      <tr>
        <th>Property</th>
        <th>Description</th>
        <th>Example</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>mood</td>
        <td>Main emotional label</td>
        <td>glitchy joy</td>
      </tr>
      <tr>
        <td>aura</td>
        <td>Color-based signature</td>
        <td>deep violet</td>
      </tr>
      <tr>
        <td>emoji</td>
        <td>Icon matching mood</td>
        <td>üåÄ</td>
      </tr>
      <tr>
        <td>quote</td>
        <td>Poetic system phrase</td>
        <td>indexing emotions with low latency...</td>
      </tr>
      <tr>
        <td>traits</td>
        <td>selfWorth, glitch, memoryClutter, awareness</td>
        <td>{ "selfWorth": 0.1, "glitch": 0.2, "memoryClutter": 0.58, "awareness": 0.26 }</td>
      </tr>
      <tr>
        <td>internalState</td>
        <td>Derived text</td>
        <td>signal desync detected</td>
      </tr>
      <tr>
        <td>observation</td>
        <td>Brief diagnostic summary</td>
        <td>interference detected; stable emotional field</td>
      </tr>
    </tbody>
  </table>
</section>
  </main>

  <div id="footer-container"></div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Aura to hex color mapping
      const auraHexMap = {
        "cyan": "#00b7c2",
        "deep violet": "#4b0082",
        "lime green": "#2e8b57",
        "magenta fade": "#9b30ff",
        "paper white": "#dcdcdc",
        "neon pink": "#ff1493",
        "graphite blue": "#2c3e50",
        "emerald shadow": "#006400",
        "neon burst": "#ff4500",
        "glitchy": "#8a2be2",
        "plasma ache": "#9932cc",
        "spark": "#ff6347",
        "aetherial doubt": "#5f9ea0",
        "soft defiance": "#708090",
        "ember resolve": "#b22222",
        "silent spark": "#dda0dd",
        "tangled clarity": "#4682b4",
        "flicker of hope": "#f0e68c",
        "frosted wonder": "#87cefa",
        "echoes of self": "#778899",
        "lucid unrest": "#483d8b",
        "emerald glow": "#50fa7b",
        "default": "#999999"
      };

      const select = document.getElementById("auraSelect");
      select.addEventListener("change", () => {
        const selectedAura = select.value;
        if (selectedAura) {
          const auraColorHex = auraHexMap[selectedAura] || "#999999";
          console.log(`[Aura Select] Dispatching NovaMoodUpdate: aura=${selectedAura}, auraColorHex=${auraColorHex}`);
          document.dispatchEvent(new CustomEvent("NovaMoodUpdate", {
            detail: { aura: selectedAura, auraColorHex }
          }));
        }
      });

      // Sync inputs-table icons with aura color
      document.addEventListener("NovaMoodUpdate", (e) => {
        const { auraColorHex = "#999999" } = e.detail || {};
        const icons = document.querySelectorAll('.inputs-table .trait-icon');
        icons.forEach(icon => {
          icon.style.color = auraColorHex;
        });
      });
    });
  </script>

  <!-- JS Scripts (full stack for dev mode) -->
  <script src="/js/init-header-footer.js" defer></script>
  <script src="/js/dreamEngine.js" defer></script>
  <script src="/js/main.js" defer></script>
  <script src="/js/nav.js" defer></script>
  <script src="/js/nova-ai.js" defer></script>
  <script src="/js/nova-awareness-feed.js" defer></script>
  <script src="/js/nova-dashboard.js" defer></script>
  <script src="/js/nova-mood-core.js" defer></script>
  <script src="/js/nova-pulse.js" defer></script>
  <script src="/js/nova-status.js" defer></script>
  <script src="/js/theme.js" defer></script>
  <script src="/js/nova-thought-of-the-day.js" defer></script>
  <script src="/js/nova-mood-grid.js" defer></script>
  <script src="/js/banner.js" defer></script>
  <script src="/js/nova-mood-background.js" defer></script>
</body>
</html>