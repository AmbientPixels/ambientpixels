<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Card Forge - Nova Lab">
  <title>Card Forge - Nova Lab</title>
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/grid.css">
  <link rel="stylesheet" href="/css/nav.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="/css/hero.css">
  <link rel="stylesheet" href="/css/theme.css">
  <link rel="stylesheet" href="/css/banner.css">
</head>
<body data-theme="dark">
<!--
  AmbientPixels Template Reference
  --------------------------------
    üìÑ Internal Documentation Template
  ----------------------------------
  This page is a structured documentation template used for writing system guides,
  feature specs, component breakdowns, or usage notes across the site.
  This file demonstrates usage of key layout and style classes from the AmbientPixels/Nova system.
  All examples use external CSS classes only (no inline styles).
  Copy/paste and adapt these blocks for rapid prototyping.
-->

<!-- Banner Example (from banner.css) -->
<div class="banner-container">
  <div class="banner">
    <i class="fas fa-info-circle banner-icon"></i>
    <span>Card Forge ‚Äî Lab Mode</span>
    <button class="banner-close" aria-label="Close Banner">&times;</button>
  </div>
</div>
<!-- Usage: Place at the top of your page for alerts or system messages -->

<!-- Navigation Header Placeholder (nav.css) -->
<header id="nav-header"><!-- Navigation loads here via JS include --></header>

<!-- Hero Section Example (hero.css, theme.css) -->
<section class="mini-hero">
  <img src="/images/textures/placeholder-texture.jpg" alt="Texture" class="mini-hero-img" loading="lazy">
  <h1>Card Forge</h1>
</section>
<!-- Usage: For page intros or section headers -->

<main class="grid-container">
  <!-- Grid Layout Examples (grid.css) -->
  <!-- Collapsible: Card Forge Overview (H2 collapsible) -->
  <section class="content-section grid-col-12">
    <div class="section-header">
      <h2>Card Forge Overview</h2>
      <button class="toggle-btn icon-only" aria-expanded="false"><i class="fas fa-chevron-down"></i></button>
    </div>
    <div class="content collapsed">
      <p class="nova-intro">Card Forge is a modular system for creating and managing digital identity cards‚Äîavatars, stats, and badges‚Äîfor the AmbientPixels/Nova ecosystem. It is designed for easy extension, theming, and integration with Nova's mood-driven UI.</p>
    </div>
  </section>

  <section class="content-section grid-col-12">
    <h2>Dev/Test Environment</h2>
    <ul class="nova-list">
      <li>Isolated dev sandbox: <code>/lab/card-forge/</code></li>
      <li>Live test page: <code>lab/card-forge/index.html</code></li>
      <li>All assets (JS, CSS, JSON) are local and hot-reloadable</li>
      <li>Safe for rapid prototyping and CI/CD</li>
    </ul>
  </section>

  <section class="content-section grid-col-12">
    <h2>File Structure</h2>
    <ul class="nova-list">
      <li><code>lab/card-forge/index.html</code> ‚Äî Dev/test harness for Card Forge</li>
      <li><code>lab/card-forge/card-forge.js</code> ‚Äî Main rendering logic (exports <code>window.renderRpgAvatarCards</code>)</li>
      <li><code>lab/card-forge/card-forge.css</code> ‚Äî All card-specific styles</li>
      <li><code>lab/card-forge/card-forge.json</code> ‚Äî Card data (avatars, stats, badges, etc.)</li>
      <li><code>docs/project-card-forge.html</code> ‚Äî This documentation page</li>
      <li><code>docs/logs/project-card-forge.me</code> ‚Äî Markdown changelog/spec</li>
    </ul>
  </section>

  <section class="content-section grid-col-12">
    <h2>Features</h2>
    <ul class="nova-list">
      <li>Avatar card rendering with flip animation</li>
      <li>Stats, badges, achievements, and links</li>
      <li>Theming (legendary, epic, rare, etc.)</li>
      <li>Role-based badge logic</li>
      <li>Responsive grid layout</li>
      <li>Isolated dev/test mode with <code>devMode</code> flag</li>
      <li>Integrated with Nova's crystalline aesthetic</li>
    </ul>
  </section>

  <section class="content-section grid-col-12">
    <h2>Technical Architecture</h2>
    <ul class="nova-list">
      <li>Frontend: HTML + CSS + JS (modular, no inline styles)</li>
      <li>Rendering: CSS Grid, card-forge.js, future export support</li>
      <li>Data: JSON-driven (card-forge.json)</li>
      <li>Dev Agent: Cascade (Windsurf AI) for code logic</li>
      <li>Deployment: GitHub + Azure CI/CD</li>
    </ul>
  </section>

  <section class="content-section grid-col-12">
    <h2>How to Extend</h2>
    <ul class="nova-list">
      <li>Add or edit cards in <code>card-forge.json</code></li>
      <li>Customize rendering in <code>card-forge.js</code> (see <code>renderRpgAvatarCards</code>)</li>
      <li>Update or extend styles in <code>card-forge.css</code></li>
      <li>Use <code>devMode</code> for test features and debugging</li>
      <li>Document changes in <code>project-card-forge.me</code></li>
    </ul>
  </section>

  <section class="content-section grid-col-12">
    <h2>Next Steps: Card Forge Card Editor UI</h2>
    <h3>Current Status (as of 2025-06-26)</h3>
    <ul class="nova-list">
      <li><b>‚úÖ 3-column grid layout complete:</b> Sidebar, live preview, and tabbed forms are fully aligned and responsive.</li>
      <li><b>‚úÖ Azure Function Save Integration:</b> Card Forge now saves card data to Azure Blob Storage via <code>/api/saveCardData</code>.</li>
      <li><b>‚úÖ Asset Loading Fixed:</b> All Card Forge assets use absolute paths, resolving 404/MIME errors on custom domains.</li>
      <li><b>‚úÖ Backend Debugging:</b> 500 error resolved by setting <code>api_location</code> in workflow, fixing <code>package.json</code>, and adding error logging.</li>
      <li><b>‚ö†Ô∏è Most interactive features non-functional:</b> Add/Remove Card, Import/Export, Save/Reset, and tab switching currently do not work. Card style selector and live preview update are functional.</li>
      <li><b>üõ†Ô∏è JavaScript event handling and state logic pending:</b> UI is ready for JS wiring and further UX polish.</li>
    </ul>

    <h3>Next Steps</h3>
    <ul class="nova-list">
      <li>Debug and restore all button and form event handlers (Add, Remove, Import, Export, Save, Reset, Flip, etc.)</li>
      <li>Fix tab switching logic for Front/Back panels</li>
      <li>Ensure all form inputs update the live preview and card data</li>
      <li>Restore card list interactivity and persistent storage</li>
      <li>Add user feedback and error handling</li>
      <li>Update documentation, logs, and project JSON as features are restored</li>
    </ul>

    <h3>Reference Sheet (Persistent)</h3>
    <ul class="nova-list">
      <li><b>Frontend:</b> <code>/lab/card-forge/index.html</code>, <code>card-forge.js</code>, <code>card-forge.css</code>, <code>card-forge-editor.js</code></li>
      <li><b>Data:</b> <code>/lab/card-forge/card-forge.json</code> (card data), <code>/data/rpg-avatar-cards.json</code> (main deck)</li>
      <li><b>Backend:</b> <code>/api/saveCardData/index.js</code> (Azure Function, CommonJS, saves JSON to Blob Storage)</li>
      <li><b>API Config:</b> <code>/api/package.json</code> (must have <code>@azure/storage-blob</code> dep, no <code>type: module</code>)</li>
      <li><b>CI/CD:</b> <code>.github/workflows/azure-static-web-apps-*.yml</code> (must set <code>api_location: "api"</code>)</li>
      <li><b>Logs/Docs:</b> <code>/docs/logs/project-card-forge.me</code> (log), <code>/docs/project-card-forge.html</code> (feature/tech doc)</li>
      <li><b>Azure:</b> Set <code>AZURE_STORAGE_CONNECTION_STRING</code> in Azure portal (full string, not just key). Function creates <code>cardforge</code> container if missing.</li>
      <li><b>Error Logging:</b> Stack traces included in dev, remove for production.</li>
      <li><b>Common Issues:</b> 500 error + blank response: usually missing dep or module type mismatch. 405 error: missing <code>api_location</code> in workflow. 404/MIME errors: use absolute asset paths.</li>
      <li><b>Dev Protocols:</b> No inline styles; reuse Nova/AmbientPixels CSS classes. All JS modularized, no global leaks. Document all changes here and in <code>/docs/project-card-forge.me</code>.</li>
      <li>Use this sheet as your persistent reference if memory is lost‚Äîsummarize blockers, breakthroughs, and key config.</li>
    </ul>

    <h3>Core Features</h3>
    <pre><code>-----------------------------------------------------
|  Sidebar/List      |  Card Editor Form   | Preview |
|--------------------|--------------------|---------|
| [Card 1]           | Name: [______]     | [Card]  |
| [Card 2]           | Avatar: [url/up]   |         |
| [+ Add Card]       | ...                |         |
| [Import/Export]    | [Save] [Reset]     |         |
-----------------------------------------------------
</code></pre>
    <ul class="nova-list">
      <li>On mobile, sidebar collapses to dropdown or modal.</li>
    </ul>

    <h3>Technical Approach</h3>
    <ul class="nova-list">
      <li>Reuse existing CSS: Nova/AmbientPixels classes, no new color/badge styles.</li>
      <li>No inline styles: All styles in card-forge.css or existing CSS.</li>
      <li>Componentized JS: Editor logic in <code>card-forge-editor.js</code>, rendering in <code>card-forge.js</code>.</li>
      <li>Data: Edits operate on a JS object mirroring <code>card-forge.json</code>.</li>
      <li>Persistence: Save to localStorage and/or allow download/upload of JSON.</li>
    </ul>

    <h3>Steps to Implement</h3>
    <ul class="nova-list">
      <li>Design UI skeleton in <code>/lab/card-forge/index.html</code>.</li>
      <li>Create <code>card-forge-editor.js</code> for editor logic and events.</li>
      <li>Wire up live preview using <code>renderCardForge</code>.</li>
      <li>Implement add/edit/remove/reorder logic for card data.</li>
      <li>Add import/export functionality (JSON validation, error handling).</li>
      <li>Polish accessibility and mobile layout.</li>
      <li>Update documentation to include editor usage and extension points.</li>
      <li>(Optional) Add test cases for schema validation and UI interactions.</li>
    </ul>

    <h3>Stretch Goals</h3>
    <ul class="nova-list">
      <li>Image upload/preview with drag-and-drop support.</li>
      <li>Undo/redo for edits.</li>
      <li>Multi-user collaboration (future backend).</li>
      <li>Theme preview switcher for instant card restyling.</li>
    </ul>
  </section>

  <section class="content-section grid-col-12">
    <h2>References & Links</h2>
    <ul class="nova-list">
      <li><a href="/lab/card-forge/index.html">Card Forge Dev Sandbox</a></li>
      <li><a href="/docs/logs/project-card-forge.me">Changelog & Spec (Markdown)</a></li>
      <li><a href="/docs/template.html">Documentation Template</a></li>
    </ul>
  </section>

  </section>
  <section class="content-section grid-col-6">
    <h3>Half-width Section (6 columns)</h3>
    <p>Combine <code>grid-col-6</code> for side-by-side layouts.</p>
  </section>
  <section class="content-section grid-col-6">
    <h3>Another Half-width Section</h3>
    <p>Place next to the previous for a two-column layout.</p>
  </section>

  
  </main>

  <div id="footer-container"></div>

  <script src="/js/init-header-footer.js" defer></script>
  <script src="/js/init-quotes.js" defer></script>
  <script src="/js/md-inject.js" defer></script>
  <script src="/js/modal-window.js" defer></script>
  <script src="/js/nav.js" defer></script>
  <script src="/js/nova-ai.js" defer></script>
  <script src="/js/nova-awareness-feed.js" defer></script>
  <script src="/js/nova-dashboard.js" defer></script>
  <script src="/js/nova-insights.js" defer></script>
  <script src="/js/nova-interaction-log.js" defer></script>
  <script src="/js/nova-mood-core.js" defer></script>
  <script src="/js/nova-quotes.js" defer></script>
  <script src="/js/nova-status.js" defer></script>
  <script src="/js/nova-telemetry-logger.js" defer></script>
  <script src="/js/project-dashboard.js" defer></script>
  <script src="/js/template.js" defer></script>
  <script src="/js/theme.js" defer></script>
  <script src="/js/main.js"></script>
</body>
</html>
